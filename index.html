<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex,nofollow">
    <meta name="viewport" content="width=device-width">
    <title>Fun-size Candee</title>
    <meta name="description" content="Official status of the Fun-size Candee's impending arrival.">
    <meta name="author" content="zcandee">

    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {background:#eee; color:#222; font-family:Rubik,Tahoma,sans-serif; font-size:1em; -moz-animation:fadein 1s; -webkit-animation:fadein 1s}
      section {border:#f8f solid 0.1em; display:block; margin:3em auto 0 auto; max-width:40em; min-width:15em; text-align:center}
      h2 {background:#222; color:#8bf; float:left; font-size:1.2em; margin:-0.75em 0 0 0.5em; padding:0.1em 0.75em}
      h1 {font-size:4em; margin:1em auto; max-width:100vw; text-align:center; transform:translateY(-0%)}
      h1 > span {color:#8bf; display:inline-block; font-size:0.5em; margin:0 -0.1em; -moz-animation:dropout 5s 0s; -webkit-animation:dropout 5s 0s}
      h1 > span:first-child {margin:0.1em}
      @keyframes fadein {
        0% {opacity:0}
        100% {opacity:1}
      }
      @keyframes dropout {
        0%,55% {color:#222; font-size:1em; margin:0; transform:rotate(0); transform-origin:0.05em 0.95em}
        60% {color:#222; font-size:1em; margin:0; transform:rotate(170deg); transform-origin:0.05em 0.95em}
        63% {color:#222; font-size:1em; margin:0; transform:rotate(110deg); transform-origin:0.05em 0.95em}
        65% {color:#222; font-size:1em; margin:0; transform:rotate(135deg); transform-origin:0.05em 0.95em}
        80% {color:#222; font-size:0; margin:0.1em; transform:translateY(50vh); transform-origin:0.05em 0.95em}
        81% {color:#222; font-size:0; margin:0; transform:none; transform-origin:0.05em 0.95em}
        100% {color:#8bf; font-size:0.5em; margin:0}
      }
      p {font-size:3em}
      form {margin:2em}
      form>p {align-items:center; display:flex; flex-wrap:wrap; font-size:1.1em}
      form>p:not(:last-child) {margin-bottom:1em}
      form label {font-weight:200; max-width:70vw; order:1; padding-right:0.5em; text-align:left; width:15rem}
      form input,select {background:inherit; border:solid 2px; border-radius:0; box-sizing:border-box; display:inline-block; flex:1 1 18rem; font:1.2rem Tahoma; height:2rem; order:2}
      form:invalid button[type=submit] {display:none}
      input:invalid:not(:placeholder-shown) {border:solid red}
      input[name=email],label[for=email] {position:absolute; top:-100px}
      button {background:inherit; border:solid 2px; font-size:1.5em; min-width:5em; padding:0.25em}
      button:hover {background:#222; border:solid 2px; color:#eee}
      #result {display:block; margin:0 1em}
      #result.error {color:#f55}
      #result.success {color:#282}
      @media (prefers-color-scheme: dark) {
        body {background:#222; color:#eee}
        form input,select,button {background:#222; color:#eee}
        button:hover {background:#eee; border-color:#222; color:#222}
        @keyframes dropout {
          0%,55% {color:#eee; font-size:1em; margin:0; transform:rotate(0); transform-origin:0.05em 0.95em}
          60% {color:#eee; font-size:1em; margin:0; transform:rotate(170deg); transform-origin:0.05em 0.95em}
          63% {color:#eee; font-size:1em; margin:0; transform:rotate(110deg); transform-origin:0.05em 0.95em}
          65% {color:#eee; font-size:1em; margin:0; transform:rotate(135deg); transform-origin:0.05em 0.95em}
          80% {color:#eee; font-size:0; margin:0.1em; transform:translateY(90vh); transform-origin:0.05em 0.95em}
          81% {color:#eee; font-size:0; margin:0; transform:none; transform-origin:0.05em 0.95em}
          100% {color:#8bf; font-size:0.5em; margin:0}
        }
      }
    </style>
</head>

<body>
    <h1>Funsize<span>.</span>Cand<span>.</span>ee</h1>
    <section>
        <h2>Has <i>Fun-size</i> arrived?</h2>
        <p>Nope</p>
    </section>
    <section>
        <h2>Guesses &amp; Suggestions:</h2>
        <form id="entry" method="post" action="https://script.google.com/macros/s/AKfycbzuy0HY7pl1UAE5p4GDbS8s9Rn1kivGxNq1l1yC/exec" >
            <p><label for="email">Leave Blank:</label>
            <input type="email" id="email" name="email" placeholder="leave blank">
            <label for="contestant">Your Name:</label>
            <input id="contestant" name="contestant" placeholder="1 to 64 letters(A-Z only)" required pattern="[a-zA-Z -]{1,64}"></p>
            <p><label for="babyname">Name:</label>
            <input id="babyname" name="babyname" placeholder="1 to 64 letters(A-Z only)" pattern="[a-zA-Z -]{1,64}"></p>
            <p><label for="sex">Gender:</label>
            <select id="sex" name="sex">
                <option value="">Choose One...</option>
                <option value="boy">Boy</option>
                <option value="girl">Girl</option>
            </select></p>
            <p><label for="birthday">Birthday:</label>
            <input type="date" id="birthday" name="birthday" min="2020-07-08" max="2020-12-31" placeholder="2020-11-24" pattern="\d{4}-\d{2}-\d{2}"></p>
            <p><label for="weight">Weight (in pounds):</label>
            <input type="number" id="weight" name="weight" placeholder="7.05" step="0.01" min="0" max="20"></p>
            <p><label for="length">Length (in inches):</label>
            <input type="number" id="length" name="length" placeholder="19.5" step="0.1" min="0" max="40"></p>
            <input type="hidden" name="submitdate" id="submitdate">
            <button id="submit" type="submit" value="submit">Submit</button><br>
            <span id="result"></span>
        </form>
    </section>
    <script>
        var form = document.getElementById('entry');
        var result = document.getElementById('result');
        var submit = document.getElementById('submit');

        form.onkeypress = function (e) {
            result.className='';
            result.textContent='';

            return e.keyCode != 13;
        }

        form.onsubmit = function (e) {
            e.preventDefault();

            document.getElementById('submitdate').value=new Date().toISOString();
            submit.textContent = "Processing...";
            submit.disabled = true;

            var callbackName = 'cb' + new Date().getTime()+Math.round(100000 * Math.random());
            window[callbackName] = function(data) {
                delete window[callbackName];
                document.body.removeChild(script);
                if (data['result']=="success") {
                    form.reset();
                    result.className="success";
                    result.textContent="Success! Thanks for playing!";
                } else {
                    result.className="error";
                    result.textContent=data['error'];
                }
                submit.textContent = "Submit";
                submit.disabled = false;
            };

            var fd = '';
            for (elem in form.elements) {
                fd += (form.elements[elem].value?(form.elements[elem].name?(fd?'&':'') + form.elements[elem].name +'='+form.elements[elem].value:''):'');
            }

            var script = document.createElement('script');
            script.src = this.action + (this.action.indexOf('?') >= 0 ? '&' : '?') + fd + '&cb=' + callbackName;
            script.type= 'application/javascript';
            document.body.appendChild(script);

            return false;
        }
    </script>
</body>
</html>
