<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Fun-size Candee</title>
    <meta name="description" content="Official status of Fun-size Candee's impending arrival.">
    <meta name="author" content="zcandee">
  
    <style>
        body {font-family: Tahoma,sans-serif;font-size:1.1em;color:#fff;background:#222;}
        section {display:block;max-width:40em;min-width:15em;margin:3em auto 0 auto;border:#fff solid 0.1em;text-align:center}
        h1 {float:left; padding:0 0.75em; margin:-0.75em 0 0 1em;background:#222}
        p {font-size:3em}
        form {margin: 2em}
        form>p {font-size:1.1em; text-align:left}
        form label {display:inline-block;max-width:50%}
        form input,select {float:right;font-size:1.1em;display:inline-block;width:auto;min-width:50%;background:#555;color:#fff}
        form:invalid button[type=submit] {display: none;}
        input:invalid:not(:placeholder-shown) {border:solid red}
        input[name=email],input[name=submitdate] {position: absolute; top:-100px}
        button {background:#222; color:#fff; border:#fff solid; min-width:5em; font-size:1.5em; padding:0.25em}
        button:hover {background:#fff; color:#222; border:#222 solid}
        #result.error {color:#f55}
        #result.success {color:#282}
    </style>
</head>

<body>
    <section>
        <h1>Has <i>Fun-size</i> arrived?</h1>
        <p>Nope</p>
    </section>
    <section>
        <h1>Baby Pool</h1>
        <form id="entry" method="post" action="https://script.google.com/macros/s/AKfycbzYYkJ3DHeEzkwnt29cQw6OREXV3aG6NiRACbPRiVbqVlke2DA/exec" >
            <p><label for="contestant">Your Name:</label>
            <input type="email" name="email" placeholder="leave blank">
            <input id="contestant" name="contestant" placeholder="3 to 25 letters(A-Z only)" required pattern="[a-zA-Z -]{3,25}"></p>
            <p><label for="babyname"><i>Fun-size's</i> Official Name:</label>
            <input id="babyname" name="babyname" placeholder="3 to 25 letters(A-Z only)" pattern="[a-zA-Z -]{3,25}"></p>
            <p><label for="sex"><i>Fun-size's</i> Sex:</label>
            <select id="sex" name="sex">
                <option value="">Choose One...</option>
                <option value="boy">Boy</option>
                <option value="girl">Girl</option>
            </select></p>
            <p><label for="birthday"><i>Fun-size's</i> Birthday:</label>
            <input type="datetime-local" id="birthday" name="birthday"></p>
            <p><label for="weight"><i>Fun-size's</i> Weight (in pounds):</label>
            <input type="number" id="weight" name="weight" placeholder="7.5" step="0.01" min="0" max="20"></p>
            <p><label for="length"><i>Fun-size's</i> Length (in inches):</label>
            <input type="number" id="length" name="length" placeholder="19.5" step="0.01" min="0" max="40"></p>
            <input type="text" name="submitdate" id="submitdate">
            <button id="submit" type="submit" value="submit">Submit</button><br>
            <span id="result"></span>
        </form>
    </section>
    <script>
        var form = document.getElementById('entry');
        var result = document.getElementById('result');

        form.onkeypress = function (e) {
            result.className='';
            result.textContent='';
            
            return e.keyCode != 13;
        }
        
        form.onsubmit = function (e) {
            e.preventDefault();

            document.getElementById('submitdate').value=new Date().toISOString();
            
            var callbackName = 'cb' + new Date().getTime()+Math.round(100000 * Math.random());
            window[callbackName] = function(data) {
                delete window[callbackName];
                document.body.removeChild(script);
                if (data['result']=="success") {
                    form.reset();
                    result.className="success";
                    result.textContent="Success! Thanks for playing!";
                } else {
                    result.className="error";
                    result.textContent=data['error'];
                }
            };
            
            var fd = '';
            for (elem in form.elements) {
                fd += (form.elements[elem].value?(form.elements[elem].name?(fd?'&':'') + form.elements[elem].name +'='+form.elements[elem].value:''):'');
            }

            var script = document.createElement('script');
            script.src = this.action + (this.action.indexOf('?') >= 0 ? '&' : '?') + fd + '&cb=' + callbackName;
            script.type= 'application/javascript';
            document.body.appendChild(script);
            
            return false;
        }
    </script>
</body>
</html>
